# Plotforge 项目需求文档

## 项目简介
Plotforge是一个基于玩家选择剧情走向的交互式小说生成器。在保证小说大致框架不变的情况下，玩家可以通过自己的选择，借助AI（特别是qwen-plus API）生成个性化的小说内容，而整体故事框架则由创作者预先设定。

## 核心功能
- **自定义框架** - 支持创作者自定义小说的整体框架和关键节点
- **交互选择** - 允许玩家在关键节点进行选择，影响故事发展方向
- **AI内容生成** - 通过qwen-plus AI技术，根据玩家选择生成个性化的情节内容
- **灵活配置** - 支持灵活配置小说的主题、人物、场景等元素
- **自动保存** - 每节点结束后自动保存故事进度并下载到本地文件 `story.txt提示创作者当前进度
- **预览界面** - 小说生成内容可视化并可选择当前章节预览
## 技术栈
- **前端** - HTML5, CSS3, JavaScript (原生)
- **AI接口** - qwen-plus API
- **存储** - 浏览器本地存储 (localStorage)
## 配置文件说明

### 主配置文件 (config.json)
该文件包含小说的核心信息，例如：
```json
{
    "title": "神秘冒险",
    "author": "Plotforge",
    "version": "1.0.0",
    "description": "一个充满未知的冒险故事",
    "characterTemplate": "default",
    "frameworkTemplate": "fantasy",
    "nodeTemplate": "main_story",
    "contentTemplate": "rich"
}
```

### 人物模板配置 (Character.txt)
设定小说人物的详细信息，包括：
- 主要人物的性格、背景、动机
- 人物的外貌特征和特殊技能
- 人物之间的关系

### 框架/背景模板配置 (Framework.txt)
定义小说的整体结构和世界观，包括：
- 故事背景设定和主题格调
- 主要冲突和情节转折点
- 世界规则和设定

### 节点模板配置 (Node.txt)
定义小说的关键节点和分支选择，包括：
- 章节内的选择节点和分支走向
- 各分支的关联性和回归主线的机制
- 选择对故事变量的影响

### 内容模板配置 (Content.txt)
定义各节点内容的风格和格式，包括：
- 不同风格的内容模板（如详细、简洁、对话为主等）
- 内容长度、段落数量、句式等参数
- 示例文本

### 简介模板配置 (Introduction.txt)
包含小说的介绍信息，包括：
- 故事标题、副标题和作者信息
- 故事简介和主要特点
- 使用说明和免责声明

## 使用流程

### 创作者使用流程
1. **配置基础框架** - 修改 `someconfigs/Framework.txt` 文件，定义小说的背景和世界观
2. **创建人物设定** - 修改 `someconfigs/Character.txt` 文件，设定主要人物
3. **设计故事节点** - 修改 `someconfigs/Node.txt` 文件，设计故事的节点和分支
4. **配置内容风格** - 修改 `someconfigs/Content.txt` 文件，设定内容的风格和格式
5. **编写故事简介** - 修改 `someconfigs/Introduction.txt` 文件，编写故事简介
6. **更新主配置** - 修改 `someconfigs/config.json` 文件，关联各个模板

### 玩家使用流程
1. **打开应用** - 在浏览器中打开 `index.html` 文件
2. **输入API密钥** - 首次使用时，输入qwen-plus API密钥
3. **开始阅读** - 点击"开始你的冒险"按钮开始阅读
4. **做出选择** - 在关键节点点击选择按钮，决定故事走向
5. **等待AI生成** - 系统会调用qwen-plus API生成新的故事情节
6. **继续阅读** - 阅读新生成的内容，并在下一步做出选择
7. **完成故事** - 继续上述过程，直到完成整个故事

## qwen-plus API配置

要使用AI生成功能，您需要获取qwen-plus API密钥并在应用中配置：

1. 访问 [阿里云官方网站](https://bailian.console.aliyun.com/?tab=model#/api-key) 注册账号并获取API密钥
2. 在首次运行应用时，输入您的API密钥
3. 密钥将保存在浏览器本地存储中，方便后续使用

您也可以直接在 `js/config.js` 文件中修改AI配置：
```javascript
const config = {
    ai: {
        provider: 'qwen-plus',
        apiKey: '', // 在此处填入您的API密钥
        baseUrl: 'https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions',
        model: 'qwen-plus',
        maxTokens: 16384,
        temperature: 1.2,
        topP: 0.95,
        topK: 6
    },
    // 其他配置...
};
```

## 自定义故事

如果您想创建自己的故事，可以按照以下步骤操作：

1. **创建新的模板文件** - 在 `someconfigs` 文件夹中创建新的模板文件
2. **定义故事结构** - 根据现有模板的格式，定义您自己的故事结构、人物和节点
3. **修改主配置文件** - 在 `config.json` 中引用您创建的新模板
4. **保存并测试** - 保存所有修改，然后在浏览器中打开 `index.html` 测试您的故事

## 注意事项

- **API密钥安全** - 请妥善保管您的qwen-plus API密钥，不要与他人分享
- **内容质量** - AI生成内容的质量依赖于配置的详细程度和提示的准确性
- **浏览器兼容性** - 本应用建议在现代浏览器（如Chrome、Firefox、Edge等）中运行
- **本地存储限制** - 由于使用localStorage，故事进度可能会在清除浏览器数据时丢失
- **版权问题** - 请确保您创建的故事内容符合相关法律法规，避免侵犯他人版权

## 开发说明

如果您想参与项目开发，可以按照以下步骤操作：

1. **克隆项目** - 将项目文件复制到您的本地计算机
2. **修改代码** - 根据需要修改HTML、CSS或JavaScript文件
3. **测试更改** - 在浏览器中打开 `index.html` 测试您的更改
4. **优化性能** - 确保您的更改不会影响应用的性能和用户体验

## 免责声明

- 本应用仅供学习和娱乐使用
- 使用本应用生成的内容由用户自行负责，开发者不承担任何责任
- 请合理使用qwen-plus API，遵守相关服务条款和使用政策

## 更新日志

### v1.0.0 (2025-9-16)
- 初始版本发布
- 支持基于qwen-plus API的故事内容生成
- 实现基本的交互式选择功能
- 支持故事进度自动保存
- 提供多个故事模板和内容风格选项